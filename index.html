<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Egg Timer â€” Tapfone</title>
  <style>
    /* Root layout: center a 9:16 app frame */
    :root{--bg:#f3f3f5;--egg:#ffffff;--yolk:#ffd24d;--accent:#ffb84d;--glass: rgba(255,255,255,0.6)}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{display:flex;align-items:center;justify-content:center;background:#4da6ff;}

    /* App frame with 9:16 aspect ratio */
    .frame{
      width:min(420px,46vh); /* responsive: scale with viewport height */
      aspect-ratio:9/16; /* enforces 9:16 ratio */
      display:flex;flex-direction:column;align-items:center;justify-content:space-between;
      padding:18px;box-sizing:border-box;position:relative;
    }

    /* Egg background (oval) */
    .egg{
      width:100%;height:100%;background:var(--egg);border-radius:60% 60% 55% 55% / 68% 68% 32% 32%;
      box-shadow: 0 18px 40px rgba(10,20,40,0.08), inset -6px -10px 20px rgba(0,0,0,0.03);
      position:relative;display:flex;flex-direction:column;align-items:center;padding:20px;gap:8px;
    }

    /* Title top center */
    .title{font-weight:700;font-size:20px;letter-spacing:0.6px;text-align:center;margin-top:6px}

    /* Yolk area */
    .yolk-wrap{flex:1;display:flex;align-items:center;justify-content:center;width:100%;}
    .yolk{
      width:64%;aspect-ratio:1/1;border-radius:50%;background:radial-gradient(circle at 30% 28%, #ffe27a 0%, var(--yolk) 45%, #ffb84d 100%);
      display:flex;align-items:center;justify-content:center;position:relative;box-shadow: 0 10px 20px rgba(255,180,60,0.18), inset 0 -6px 10px rgba(255,255,255,0.25);
    }

    /* Circular progress SVG sits around the yolk */
    .progress-svg{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:110%;height:110%;pointer-events:none}

    .time-display{position:absolute;font-weight:700;font-size:28px;color:#222;text-shadow:0 1px 0 rgba(255,255,255,0.6)}

    /* Controls area */
    .controls{width:100%;display:flex;flex-direction:column;gap:12px;padding:8px 6px 16px;box-sizing:border-box}
    .preset-row{display:flex;gap:10px;justify-content:center}
    button.preset{flex:1;padding:12px 8px;border-radius:12px;border:none;font-weight:700;cursor:pointer;box-shadow:0 6px 14px rgba(0,0,0,0.06)}
    .soft{background:linear-gradient(180deg,#e6f6ff,#d9f0ff);color:#065a86}
    .medium{background:linear-gradient(180deg,#fff6e6,#fff0d9);color:#7a4a00}
    .hard{background:linear-gradient(180deg,#ffece6,#ffdcd0);color:#7a2b00}

    .utility-row{display:flex;gap:12px;justify-content:center}
    button.ghost{background:transparent;border:2px solid rgba(0,0,0,0.06);padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer}

    /* Footer */
    .footer{font-weight:600;font-size:13px;padding-bottom:6px;color:#667085;text-align:center}

    /* Responsive tweaks */
    @media (max-width:420px){.frame{width:92vw}}
  </style>
</head>
<body>
  <div class="frame" role="application" aria-label="Egg timer">
    <div class="egg">
      <div class="title" id="appTitle">Egg Timer</div>

      <div class="yolk-wrap">
        <div class="yolk" aria-hidden="true">
          <!-- progress ring (SVG) -->
          <svg class="progress-svg" viewBox="0 0 120 120" preserveAspectRatio="xMidYMid meet">
            <defs></defs>
            <g transform="translate(60 60)">
              <circle r="52" fill="transparent" stroke="rgba(0,0,0,0.04)" stroke-width="12"></circle>
              <circle id="progress" r="52" fill="transparent" stroke="rgba(0,0,0,0.12)" stroke-width="12" stroke-linecap="round"
                      stroke-dasharray="326.725" stroke-dashoffset="0" transform="rotate(-90)"></circle>
            </g>
          </svg>

          <div class="time-display" id="timeDisplay">00:00</div>
        </div>
      </div>

      <div class="controls">
        <div class="preset-row">
          <button class="preset soft" data-seconds="240">Soft<br><small>4:00</small></button>
          <button class="preset medium" data-seconds="420">Medium<br><small>7:00</small></button>
          <button class="preset hard" data-seconds="600">Hard<br><small>10:00</small></button>
        </div>

        <div class="utility-row">
          <button class="ghost" id="startPause">Start</button>
          <button class="ghost" id="resetBtn">Reset</button>
        </div>
      </div>

      <div class="footer">Tapfone</div>
    </div>
  </div>

  <script>
    // Element refs
    const presets = document.querySelectorAll('.preset');
    const startPause = document.getElementById('startPause');
    const resetBtn = document.getElementById('resetBtn');
    const timeDisplay = document.getElementById('timeDisplay');
    const progress = document.getElementById('progress');

    // Timer state
    let totalSeconds = 0;
    let remaining = 0;
    let timerId = null;
    const circumference = 2 * Math.PI * 52; // matches r=52 used in SVG
    progress.style.strokeDasharray = circumference.toFixed(3);

    function formatTime(s){
      const mm = Math.floor(s/60).toString().padStart(2,'0');
      const ss = Math.floor(s%60).toString().padStart(2,'0');
      return `${mm}:${ss}`;
    }

    function updateDisplay(){
      timeDisplay.textContent = formatTime(remaining);
      // update progress offset
      const pct = totalSeconds > 0 ? (remaining / totalSeconds) : 0;
      const dash = (1 - pct) * circumference;
      progress.style.strokeDashoffset = dash.toFixed(3);
    }

    function startTimer(){
      if (remaining <= 0) return;
      if (timerId) return; // already running
      startPause.textContent = 'Pause';
      timerId = setInterval(()=>{
        remaining--;
        if (remaining <= 0){
          remaining = 0;updateDisplay();stopTimer(true);return;
        }
        updateDisplay();
      },1000);
    }

    function stopTimer(finished=false){
      if (timerId){clearInterval(timerId);timerId = null}
      startPause.textContent = finished? 'Done' : 'Start';
      if (finished){
        // small visual flash on completion
        const yolk = document.querySelector('.yolk');
        yolk.animate([{transform:'scale(1)'},{transform:'scale(1.06)'},{transform:'scale(1)'}],{duration:700});
        // play a beep using WebAudio
        try{
          const ctx = new (window.AudioContext||window.webkitAudioContext)();
          const o = ctx.createOscillator(); const g = ctx.createGain();
          o.type='sine'; o.frequency.value=880; g.gain.value=0.0001;
          o.connect(g); g.connect(ctx.destination);
          o.start(); g.gain.exponentialRampToValueAtTime(0.04, ctx.currentTime+0.02);
          g.gain.exponentialRampToValueAtTime(0.00001, ctx.currentTime+0.6);
          o.stop(ctx.currentTime+0.62);
        }catch(e){/* ignore if audio blocked */}
      }
    }

    // Preset buttons
    presets.forEach(btn=>{
      btn.addEventListener('click',()=>{
        totalSeconds = Number(btn.dataset.seconds);
        remaining = totalSeconds;
        updateDisplay();
        stopTimer();
        // auto-start
        startTimer();
      });
    });

    // Start/Pause handler
    startPause.addEventListener('click',()=>{
      if (!timerId){
        startTimer();
      } else {
        // pause
        clearInterval(timerId); timerId = null; startPause.textContent='Start';
      }
    });

    // Reset
    resetBtn.addEventListener('click',()=>{
      clearInterval(timerId); timerId = null; totalSeconds = 0; remaining = 0; updateDisplay(); startPause.textContent='Start';
    });

    // init display
    totalSeconds = 0; remaining = 0; updateDisplay();

    // Accessibility: keyboard shortcuts 1/2/3 for presets
    window.addEventListener('keydown', (e)=>{
      if (e.key === '1') presets[0].click();
      if (e.key === '2') presets[1].click();
      if (e.key === '3') presets[2].click();
      if (e.key === ' ') { e.preventDefault(); startPause.click(); }
    });
  </script>
</body>
</html>
